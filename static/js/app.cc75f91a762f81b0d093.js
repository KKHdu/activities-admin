webpackJsonp([2],{"2Ewi":function(e,t){},"6f/g":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Dd8w"),o=n.n(r),u=n("NYxO"),a={created:function(){console.log(this.user)},computed:o()({},Object(u.c)(["user"]))},i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  "+this._s(this.user.role)+" -- "+this._s(this.user.id)+"\n")])},staticRenderFns:[]};var s=n("VU/8")(a,i,!1,function(e){n("FgEJ")},"data-v-2b9aa14b",null);t.default=s.exports},A66B:function(e,t,n){e.exports=function(e){return function(){return n("Opzk")("./"+e+".vue")}}},FgEJ:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),o=n("zL8q"),u=n.n(o),a=(n("tvR6"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("transition",[t("router-view")],1)],1)},staticRenderFns:[]});var i=n("VU/8")({name:"app"},a,!1,function(e){n("2Ewi")},null,null).exports,s=n("/ocq"),c=n("6f/g"),l=n("A66B");r.default.use(s.a);var f=[{path:"/login",component:l("login/index")},{path:"/",component:c.default}],d=new s.a({routes:f}),p=n("NYxO"),m=(n("sax8"),n("//Fk")),g=n.n(m),v=n("bOdI"),h=n.n(v),E="SET_TOKEN",k="SET_USER",O=function(){return localStorage.getItem("TOKEN_ACTIVITIES")},_=n("mtWM"),I=n.n(_).a.create({baseURL:"https://www.easy-mock.com/mock/5a7c1e03e3fe0e684e84b66f/prod",timeout:5e3});I.interceptors.request.use(function(e){return x.getters.token&&(e.headers["X-Token"]=O()),e},function(e){console.log(e),g.a.reject(e)}),I.interceptors.response.use(function(e){return e},function(e){return console.log("err"+e),Object(o.Message)({message:e.message,type:"error",duration:5e3}),g.a.reject(e)});var T,w=I;var b={state:{user:null,token:O()},mutations:(T={},h()(T,E,function(e,t){e.token=t}),h()(T,k,function(e,t){e.user=t}),T),actions:{login:function(e,t){var n=e.commit;return new g.a(function(e,r){var o;(o=t,w({url:"/login",method:"post",data:o})).then(function(t){var r=t.data.data.token;n(E,r),n(k,t.data.data),function(e){localStorage.setItem("TOKEN_ACTIVITIES",e)}(r),e(t.data)}).catch(function(e){r(e)})})},logout:function(e){(0,e.commit)(E,""),localStorage.removeItem("TOKEN_ACTIVITIES")}}};r.default.use(p.a);var x=new p.a.Store({getters:{token:function(e){return e.user.token},user:function(e){return e.user.user}},modules:{user:b},strict:!1,plugins:[]}),S=n("Y81h"),j=n.n(S),N=(n("UVIz"),["/login","noredirect"]);d.beforeEach(function(e,t,n){j.a.start(),O()?"/login"===e.path?n("/"):n():-1!==N.indexOf(e.path)?n():n("/login"),j.a.done()}),r.default.config.productionTip=!1,r.default.use(u.a),new r.default({el:"#app",router:d,store:x,components:{App:i},template:"<App/>"})},Opzk:function(e,t,n){var r={"./layout/index.vue":["6f/g"],"./login/index.vue":["T+/8",0]};function o(e){var t=r[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}o.keys=function(){return Object.keys(r)},o.id="Opzk",e.exports=o},UVIz:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.cc75f91a762f81b0d093.js.map